<?php

define('VIEWS_PATH_PREFIX', '../views/');
define('LAYOUTS_PATH_PREFIX', '../views/layouts/');
define('LAYOUTS_COMPONENTS_PATH_PREFIX', '../views/layouts/components/');

class PathService
{
    public static function view(string $path): string
    {
        return VIEWS_PATH_PREFIX . $path . '.php';
    }

    public static function layout(string $file): string
    {
        return LAYOUTS_PATH_PREFIX . $file . '.php';
    }

    public static function layoutComponent(string $file): string
    {
        return LAYOUTS_COMPONENTS_PATH_PREFIX . $file . '.php';
    }

    public static function prevNextButton(string $prevLink, string $nextLink, string $prevText = 'Previous', string $nextText = 'Next')
    {
        $component = '
    <div style="position: relative; width: 100%; margin-top: 100px;">
        <button style="position: absolute; left: 0; bottom: 0; padding: 10px 20px; background-color: #008CBA; color: white; border: none; cursor: pointer; border-radius: 4px;">
            <a href="/vulnerability-vault' . htmlspecialchars($prevLink) . '" style="color: white; text-decoration: none;">' . htmlspecialchars($prevText) . '</a>
        </button>
        <button style="position: absolute; right: 0; bottom: 0; padding: 10px 20px; background-color: #008CBA; color: white; border: none; cursor: pointer; border-radius: 4px;">
            <a href="/vulnerability-vault' . htmlspecialchars($nextLink) . '" style="color: white; text-decoration: none;">' . htmlspecialchars($nextText) . '</a>
        </button>
    </div>';

        echo $component;
    }

    public static function isCurrentUri(string $uri): bool
    {
        return $_SERVER['REQUEST_URI'] === $uri;
    }

    public static function activeElementIfIsCurrentUri(string $uri): string
    {
        if (!self::isCurrentUri($uri)) {
            return "";
        }

        return 'navigation__list-item--active';
    }

    public static function getBaseUrl()
    {
        return sprintf(
            "%s://%s%s",
            isset($_SERVER['HTTPS']) && $_SERVER['HTTPS'] != 'off' ? 'https' : 'http',
            $_SERVER['SERVER_NAME'],
            dirname($_SERVER['SCRIPT_NAME'])
        );
    }

    public static function getResourcesUrl()
    {
        return self::getBaseUrl() . "/resources";
    }

    public static function getImagesUrl()
    {
        return self::getBaseUrl() . "/images";
    }

    public static function getFaviconUrl()
    {
        return self::getImagesUrl() . "/favicon";
    }
}
